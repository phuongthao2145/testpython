{% extends "demo/base.html" %}
{% block title %}Detail{% endblock %}

{% block content %}

<h4 class="py-2">Thông tin {{ id.name}}</h4>
<div style="overflow-x:auto;">
    <table class="table table-striped table-hover table-responsive">
    <thead>
    <tr>
       <th scope="col">ID</th>
        <th scope="col">Mã bệnh nhân</th>
        <th scope="col">Họ Tên</th>
        <th scope="col">Trạng thái</th>
        <th scope="col">F cha</th>
        <th scope="col">Số điện thoại</th>
        <th scope="col">Địa chỉ</th>
        <th scope="col">Phường/Xã</th>
        <th scope="col">Quận/Huyện</th>
        <th scope="col">Tỉnh/Thành</th>
        <th scope="col">Ngày phát hiện</th>
        <th scope="col">Kết quả</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="field-id">{{ id.id }}</td>
        <td class="field-patientcode">{{ id.patientcode }}</td>
        <td class="field-name">{{ id.name }}</td>
        <td class="field-status">{{ id.status }}</td>
         <td class="field-f0">
             {% if id.f_status %}
             <a href="{% url 'demo:detail' id.f_status.patientcode %}">{{ id.f_status.name }}</a>
            {% endif %}
         </td>
        <td class="field-phone">{{ id.phone }}</td>
        <td class="field-address">{{ id.address }}</td>
         <td class="field-phone">
            {% if id.province %}
            <a href="{% url 'demo:view' id.province.slug %}">{{ id.province.proname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">
            {% if id.province %}
            <a href="{% url 'demo:view' id.province.district.slug %}">{{ id.province.district.disname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">
            {% if id.province %}
            <a href="{% url 'demo:view' id.province.district.city.slug %}">{{ id.province.district.city.cityname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">{{ id.created_at }}</td>
        <td class="field-address">
            {% if id.test_result %}
            <a href="{% url 'demo:view' id.test_result.tag %}">{{ id.test_result }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td>
            <a href="{% url 'demo:updateStatusF0' id.id %}"
               class="update" id="link-danger" data-bs-toggle="tooltip"
               data-bs-placement="top" title="Chuyển sang F0"><i class="fas fa-arrow-up"></i></a>
            <a href="{% url 'demo:updateStatus' id.id %}"
               class="update" id="link-success" data-bs-toggle="tooltip"
               data-bs-placement="top" title="Hết cách ly"><i class="fas fa-arrow-down"></i></a>
        </td>
    </tr>
    </tbody>
</table>
</div>
{% if fc  %}
<h4 class="pt-3 pb-2">Có F cha {{ fc.name}}</h4>
<div style="overflow-x:auto;">
    <table class="table table-striped table-hover table-responsive">
    <thead>
    <tr>
       <th scope="col">ID</th>
        <th scope="col">Mã bệnh nhân</th>
        <th scope="col">Họ Tên</th>
        <th scope="col">Trạng thái</th>
        <th scope="col">F cha</th>
        <th scope="col">Số điện thoại</th>
        <th scope="col">Địa chỉ</th>
        <th scope="col">Phường/Xã</th>
        <th scope="col">Quận/Huyện</th>
        <th scope="col">Tỉnh/Thành</th>
        <th scope="col">Ngày phát hiện</th>
        <th scope="col">Kết quả</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="field-id">{{ fc.id }}</td>
        <td class="field-patientcode">
           {{ fc.patientcode }}
        </td>
        <td class="field-name">{{ fc.name }}</td>
        <td class="field-status">{{ fc.status }}</td>
         <td class="field-f0">
             {% if fc.f_status %}
             <a href="{% url 'demo:detail' fc.f_status.patientcode %}">{{ fc.f_status.name }}</a>
            {% endif %}
         </td>
        <td class="field-phone">{{ fc.phone }}</td>
        <td class="field-address">{{ fc.address }}</td>
         <td class="field-phone">
            {% if fc.province %}
            <a href="{% url 'demo:view' fc.province.slug %}">{{ fc.province.proname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">
            {% if fc.province %}
            <a href="{% url 'demo:view' fc.province.district.slug %}">{{ fc.province.district.disname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">
            {% if fc.province %}
            <a href="{% url 'demo:view' fc.province.district.city.slug %}">{{ fc.province.district.city.cityname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">{{ fc.created_at }}</td>
        <td class="field-address">
            {% if fc.test_result %}
            <a href="{% url 'demo:view' fc.test_result.tag %}">{{ fc.test_result }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td>
            <a href="{% url 'demo:updateStatusF0' fc.id %}"
               class="update" id="link-danger" data-bs-toggle="tooltip"
               data-bs-placement="top" title="Chuyển sang F0"><i class="fas fa-arrow-up"></i></a>
            <a href="{% url 'demo:updateStatus' fc.id %}"
               class="update" id="link-success" data-bs-toggle="tooltip"
               data-bs-placement="top" title="Hết cách ly"><i class="fas fa-arrow-down"></i></a>
        </td>
    </tr>
    </tbody>
</table>
</div>
{% endif%}
<h4 class="pt-3 pb-2">
   Có {{ users|length}} ca F con (đã trừ các trường hợp hết cách ly)
</h4>
<div style="overflow-x:auto;overflow-y:auto; height:500px">
    <table class="table table-striped table-hover js-sort-table table-responsive">
    <thead class="sticky-top bg-light">
    <tr>
       <th scope="col">ID</th>
        <th scope="col">Mã bệnh nhân</th>
        <th scope="col">Họ Tên</th>
        <th scope="col">Trạng thái</th>
        <th scope="col">F cha</th>
        <th scope="col">Số điện thoại</th>
        <th scope="col">Địa chỉ</th>
        <th scope="col">Phường/Xã</th>
        <th scope="col">Quận/Huyện</th>
        <th scope="col">Tỉnh/Thành</th>
        <th scope="col">Ngày phát hiện</th>
        <th scope="col">Kết quả</th>
    </tr>
    </thead>
    <tbody>

    {% for row in users %}
    <tr>
        <td class="field-id">{{ row.id }}</td>
        <td class="field-patientcode">
            <a href="{% url 'demo:detail' row.patientcode %}">{{ row.patientcode }}</a>
        </td>
        <td class="field-name">{{ row.name }}</td>
        <td class="field-status">{{ row.status }}</td>
        <td class="field-f0 nowrap">
            {% if row.f_status %}
            {{ row.f_status.name }}
            {% endif %}
        </td>
        <td class="field-phone">{{ row.phone }}</td>
        <td class="field-address">{{ row.address }}</td>
         <td class="field-phone">
            {% if row.province %}
            <a href="{% url 'demo:view' row.province.slug %}">{{ row.province.proname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">
            {% if row.province %}
            <a href="{% url 'demo:view' row.province.district.slug %}">{{ row.province.district.disname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">
            {% if row.province %}
            <a href="{% url 'demo:view' row.province.district.city.slug %}">{{ row.province.district.city.cityname }}</a>
            {% else %}
            -
            {% endif %}
        </td>
        <td class="field-address">{{ row.created_at }}</td>
        <td class="field-address">
            {% if row.test_result %}
            <a href="{% url 'demo:view' row.test_result.tag %}">{{ row.test_result }}</a>
            {% else %}
            -
            {% endif %}
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
</div>
<p class="paginator">
     <span class="step-links">
        {% if users.has_previous %}
            <a href="?page={{ users.previous_page_number }}">Previous</a>
        {% endif %}
    </span>
    <span class="current">
        Page {{ users.number }} of {{ users.paginator.num_pages }}.
    </span>
    <span>
        {% if users.has_next %}
            <a href="?page={{ users.next_page_number }}">Next</a>
        {% endif %}
    </span>
</p>
{% endblock %}
